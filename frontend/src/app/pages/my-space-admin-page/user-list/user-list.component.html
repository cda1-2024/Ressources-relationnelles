<div class="flex flex-row mt-8 ml-6">
	<div class="flex flex-col flex-grow flex-1 p-6">
		<mat-card class="p-4 mb-6">
			<form [formGroup]="filterForm" class="flex flex-wrap gap-4 items-end">
		
				<!-- Username -->
				<mat-form-field appearance="outline" class="flex-1 min-w-[200px]">
					<mat-label>Username</mat-label>
					<input matInput placeholder="Recherche..." formControlName="username" />
				</mat-form-field>
		
				<mat-form-field appearance="outline" class="min-w-[150px]">
					<mat-label>Statut</mat-label>
					<mat-select formControlName="status">
						<mat-option [value]="null">Tous</mat-option>
						<mat-option value="active">Actif</mat-option>
						<mat-option value="banned">Banni·e</mat-option>
						<mat-option value="disabled">Désactivé·e</mat-option>
					</mat-select>
				</mat-form-field>
		
				<!-- Rôles -->
				<mat-form-field appearance="outline" class="flex-1 min-w-[200px]">
					<mat-label>Rôles</mat-label>
					<mat-select formControlName="role" placeholder="Tous">
						<mat-option *ngFor="let r of roleOptions" [value]="r.value">
							{{ r.label }}
						</mat-option>
					</mat-select>
				</mat-form-field>
		
			</form>
		</mat-card>
		
		<div class="overflow-auto flex-1">
			<div class="flex flex-wrap">
				<table mat-table [dataSource]="dataSource" class="min-w-full !bg-white">
			
					<!-- Username -->
					<ng-container matColumnDef="username">
						<th mat-header-cell *matHeaderCellDef>Username</th>
						<td mat-cell *matCellDef="let u">{{ u.username }}</td>
					</ng-container>

					<!-- Email -->
					<ng-container matColumnDef="email">
						<th mat-header-cell *matHeaderCellDef>Email</th>
						<td mat-cell *matCellDef="let u">{{ u.email }}</td>
					</ng-container>
			
					<!-- Statut -->
					<ng-container matColumnDef="status">
						<th mat-header-cell *matHeaderCellDef>Statut</th>
						<td mat-cell *matCellDef="let u">
							<span
								class="inline-block px-2 py-1 text-sm rounded-full"
								[ngClass]="{
									'bg-red-100 text-red-800': u.banned,
									'bg-yellow-100 text-yellow-800': !u.banned && u.disabled,
									'bg-green-100 text-green-800': !u.banned && !u.disabled
								}"
							>
								{{ u.banned ? 'Banni' : u.disabled ? 'Désactivé' : 'Actif' }}
							</span>
						</td>
					</ng-container>
			
					<!-- Rôle -->
					<ng-container matColumnDef="role">
						<th mat-header-cell *matHeaderCellDef>Rôle</th>
						<td mat-cell *matCellDef="let u">{{ getRoleLabel(u.role) }}</td>
					</ng-container>
			
					<!-- En-têtes et lignes -->
					<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
					<tr mat-row        *matRowDef="let row; columns: displayedColumns"></tr>
				</table>
			</div>
		</div>
	</div>
</div>


