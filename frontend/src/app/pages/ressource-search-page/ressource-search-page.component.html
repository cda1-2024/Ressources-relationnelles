<div class="flex flex-col lg:flex-row flex-grow h-full min-h-0 reduce-component sm-padding-navbar" style="height: 1px;">
  <aside class="hidden lg:block p-4 xl:p-6 shadow-md w-56 xl:w-64 border-r-2 border-[#e8edff] border-solid">
    <div class="mb-6 mt-4 xl:mt-8">
      <p class="text-lg font-semibold mb-4">Filtrer par :</p>
      <ul class="space-y-2 list-none">
        <li>
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Type de ressources</mat-label>
            <mat-select [(value)]="selectedType" (selectionChange)="onTypeChange($event.value)">
              <mat-option *ngFor="let type of ressourceTypes; trackBy: trackByValue" [value]="type.value">
                {{ type.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </li>
        <li>
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Catégorie</mat-label>
            <mat-select [(value)]="selectedCategory" (selectionChange)="onCategoryChange($event.value)">
              <mat-option value="">Tous</mat-option>
              <mat-option *ngFor="let category of categories; trackBy: trackByCategoryId" [value]="category.id">
                {{ category.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </li>
      </ul>
    </div>

    <div>
      <p class="text-lg font-semibold mb-4">Trier par :</p>
      <mat-chip-listbox
        aria-label="Trier par :"
        class="mat-mdc-chip-set-stacked"
      >
        <mat-chip-option> Date de publication </mat-chip-option>
        <mat-chip-option> Nombre de likes </mat-chip-option>
        <mat-chip-option> Titre </mat-chip-option>
      </mat-chip-listbox>
    </div>
  </aside>

  <div class="lg:hidden bg-white border-b border-gray-200 p-4">
    <div class="flex flex-col sm:flex-row gap-3">
      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>Type</mat-label>
        <mat-select [(value)]="selectedType" (selectionChange)="onTypeChange($event.value)">
          <mat-option *ngFor="let type of ressourceTypes; trackBy: trackByValue" [value]="type.value">
            {{ type.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>Catégorie</mat-label>
        <mat-select [(value)]="selectedCategory" (selectionChange)="onCategoryChange($event.value)">
          <mat-option value="">Tous</mat-option>
          <mat-option *ngFor="let category of categories; trackBy: trackByCategoryId" [value]="category.id">
            {{ category.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="w-full h-full min-h-0 flex flex-col" @slideUp>
    <div class="overflow-y-auto mt-2 lg:mt-4 mx-3 lg:mx-6 flex flex-col h-full min-h-0 relative">
      <div>
        <h1
          class="text-2xl sm:text-3xl lg:text-4xl font-bold w-full mt-2 lg:mt-4 mb-3 lg:mb-4 flex flex-wrap justify-center items-center md:justify-start md:items-start"
        >
          Explorer les ressources
        </h1>
        <p
          class="text-secondary-500 w-full mb-3 lg:mb-4 text-center md:text-start text-sm sm:text-base"
        >
          Trouver les ressources adaptées à vos besoins
        </p>
      </div>
      <div class="sticky-gradient sticky top-0 z-10">
        <div class="mt-3 lg:mt-4">
          <mat-form-field appearance="outline" class="w-full sm:w-3/4 lg:w-1/2 custom-height">
            <mat-label>Rechercher</mat-label>
            <input matInput [(ngModel)]="searchQuery" (input)="onSearchChange(searchQuery)">
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="isLoading" class="flex justify-center items-center py-8">
        <mat-icon class="animate-spin">refresh</mat-icon>
        <span class="ml-2">Chargement...</span>
      </div>

      <div *ngIf="!isLoading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-3 sm:gap-4 lg:gap-5 px-1 pb-5 medium-component">
        <app-ressource-card 
          *ngFor="let ressource of ressources; trackBy: trackByRessourceId" 
          [ressource]="ressource"
          [showViewButton]="true"
          [showActions]="true"
          (likeToggled)="toggleLike($event)"
          (viewClicked)="onViewRessource($event)"
          [@slideUp]>
        </app-ressource-card>
      </div>
    </div>
    
    <div class="paginator-wrapper">
      <mat-paginator
        class="paginator-left border-t-2 border-[#e8edff] border-solid py-2 relative text-xs sm:text-sm"
        [length]="totalItems"
        [pageSize]="pageSize"
        [pageSizeOptions]="[5, 10, 20]"
        [showFirstLastButtons]="true"
        [hidePageSize]="false"
        (page)="onPageChange($event)">
        <div class="gradient-paginator"></div>
      </mat-paginator>
    </div>
  </div>
</div>
